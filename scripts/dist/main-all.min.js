/*! Les intégristes - Theme - v0.1.0 - 2012-10-14
* https://github.com/lesintegristes/lesintegristes-theme
* Copyright (c) 2012 Pierre Bertet; Licensed MIT */
var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{},jaaulde.utils.cookies=function(){var e,t,n,r,i={expiresAt:null,path:"/",domain:null,secure:!1};return e=function(e){var t,n;return typeof e!="object"||e===null?t=i:(t={expiresAt:i.expiresAt,path:i.path,domain:i.domain,secure:i.secure},typeof e.expiresAt=="object"&&e.expiresAt instanceof Date?t.expiresAt=e.expiresAt:typeof e.hoursToLive=="number"&&e.hoursToLive!==0&&(n=new Date,n.setTime(n.getTime()+e.hoursToLive*60*60*1e3),t.expiresAt=n),typeof e.path=="string"&&e.path!==""&&(t.path=e.path),typeof e.domain=="string"&&e.domain!==""&&(t.domain=e.domain),e.secure===!0&&(t.secure=e.secure)),t},t=function(t){return t=e(t),(typeof t.expiresAt=="object"&&t.expiresAt instanceof Date?"; expires="+t.expiresAt.toGMTString():"")+"; path="+t.path+(typeof t.domain=="string"?"; domain="+t.domain:"")+(t.secure===!0?"; secure":"")},n=function(){var e={},t,n,r,i,s=document.cookie.split(";"),o;for(t=0;t<s.length;t+=1){n=s[t].split("="),r=n[0].replace(/^\s*/,"").replace(/\s*$/,"");try{i=decodeURIComponent(n[1])}catch(u){i=n[1]}if(typeof JSON=="object"&&JSON!==null&&typeof JSON.parse=="function")try{o=i,i=JSON.parse(i)}catch(a){i=o}e[r]=i}return e},r=function(){},r.prototype.get=function(e){var t,r,i=n();if(typeof e=="string")t=typeof i[e]!="undefined"?i[e]:null;else if(typeof e=="object"&&e!==null){t={};for(r in e)typeof i[e[r]]!="undefined"?t[e[r]]=i[e[r]]:t[e[r]]=null}else t=i;return t},r.prototype.filter=function(e){var t,r={},i=n();typeof e=="string"&&(e=new RegExp(e));for(t in i)t.match(e)&&(r[t]=i[t]);return r},r.prototype.set=function(e,n,r){if(typeof r!="object"||r===null)r={};if(typeof n=="undefined"||n===null)n="",r.hoursToLive=-8760;else if(typeof n!="string"){if(typeof JSON!="object"||JSON===null||typeof JSON.stringify!="function")throw new Error("cookies.set() received non-string value and could not serialize.");n=JSON.stringify(n)}var i=t(r);document.cookie=e+"="+encodeURIComponent(n)+i},r.prototype.del=function(e,t){var n={},r;if(typeof t!="object"||t===null)t={};typeof e=="boolean"&&e===!0?n=this.get():typeof e=="string"&&(n[e]=!0);for(r in n)typeof r=="string"&&r!==""&&this.set(r,null,t)},r.prototype.test=function(){var e=!1,t="cT",n="data";return this.set(t,n),this.get(t)===n&&(this.del(t),e=!0),e},r.prototype.setOptions=function(t){typeof t!="object"&&(t=null),i=e(t)},new r}(),function(){window.jQuery&&function(e){e.cookies=jaaulde.utils.cookies;var t={cookify:function(t){return this.each(function(){var n,r=["name","id"],i,s=e(this),o;for(n in r)if(!isNaN(n)){i=s.attr(r[n]);if(typeof i=="string"&&i!==""){s.is(":checkbox, :radio")?s.attr("checked")&&(o=s.val()):s.is(":input")?o=s.val():o=s.html();if(typeof o!="string"||o==="")o=null;e.cookies.set(i,o,t);break}}})},cookieFill:function(){return this.each(function(){var t,n,r=["name","id"],i,s=e(this),o;n=function(){return t=r.pop(),!!t};while(n()){i=s.attr(t);if(typeof i=="string"&&i!==""){o=e.cookies.get(i),o!==null&&(s.is(":checkbox, :radio")?s.val()===o?s.attr("checked","checked"):s.removeAttr("checked"):s.is(":input")?s.val(o):s.html(o));break}}})},cookieBind:function(t){return this.each(function(){var n=e(this);n.cookieFill().change(function(){n.cookify(t)})})}};e.each(t,function(t){e.fn[t]=this})}(window.jQuery)}(),function(e,t){(function(){function f(){var t=[];e("#sidebar > .weather label").each(function(n){var r=e(this);t[n]=e('<button type="button" class="'+r.attr("for")+" "+r.attr("class")+'" value="'+r.attr("for").slice(8)+'" title="'+r.text()+'"></button>').insertAfter(this)[0]}),r=e(t),r=r.add(e('<p><button type="button" class="weather-auto" value="auto" title="Auto"></button></p>').insertAfter(r.filter(":last").closest("p")).children()),r.click(function(){!s||s.abort();var t=e(this).attr("value");e.cookies.del("weather"),e.cookies.del("weather_auto"),r.removeClass("active"),e(this).addClass("active"),t==="auto"?l():c(t)})}function l(){p(),s=e.ajax({url:t.themeUrl+"/weather_service/service.php",success:function(t){d(),c(t,{hoursToLive:1}),e.cookies.set("weather_auto","1",{hoursToLive:1})},cache:!1})}function c(t,n){a&&d(),n=e.extend({hoursToLive:24},n),h(t),e.cookies.set("weather",t,n)}function h(e){n.removeClass("weather-"+i.join(" weather-")).addClass("weather-"+e)}function p(){a=!0,u.fadeIn(100),o.show().fadeTo(100,.55,function(){a&&n.addClass("loading")})}function d(){a=!1,u.fadeOut(100),o.fadeOut(100,function(){n.removeClass("loading")})}var n=e("body"),r,i=["sunny","rain","cloudy","snow","night","auto"],s,o=e('<div class="overlay" />').appendTo("#header").css("opacity","0"),u=e('<div class="loader"><div></div></div>').insertAfter(o),a=!1;e(function(){f(),e.cookies.get("weather")?e.cookies.get("weather_auto")&&e.cookies.get("weather_auto")==="1"&&r.removeClass("active").filter(".weather-auto").addClass("active"):r.filter(".weather-auto").click()})})(),e(function(){e("#sidebar section.collapsible").each(function(){var t=e('<button type="button" title="Déplier">Déplier</button>'),n=e(this).children("h1");n.addClass("collapsed"),t.appendTo(n),t.click(function(){var t=e(this),n=t.parent();n.hasClass("expanded")?(e(this).text("Déplier").attr("title","Déplier"),n.removeClass("expanded").addClass("collapsed animated").next().slideUp(150,function(){n.removeClass("animated")})):(e(this).text("Replier").attr("title","Replier"),n.removeClass("collapsed").addClass("expanded animated").next().slideDown(150,function(){n.removeClass("animated")}))}).parent().next().hide()})}),e(function(){var t=0;e("ul.last-articles li:lt(3) dt").each(function(){var n=e(this).height();n>t&&(t=n)}).height(t)}),e('<button type="button">Replier</button>').appendTo("#footer .archives li strong").click(function(){var t=e(this).addClass("animated"),n=function(){t.removeClass("animated")};t.hasClass("expanded")?t.removeClass("expanded").text("Déplier").parent().next().slideUp(150,n):t.addClass("expanded").text("Replier").parent().next().slideDown(150,n)}).filter(":not(:first)").parent().next().hide().end().end().end().filter(":first").addClass("expanded").text("Replier"),e("#wrapper > footer nav .top a").click(function(t){t.preventDefault();var n=e(this).attr("href");e("html").animate({scrollTop:0},100,function(){window.location.hash=n.slice(1),e(n).focus()})}),function(){function i(){n=e('<div class="grid"><div></div></div>').appendTo("body").css({position:"absolute",top:"0",left:"0",zIndex:"9998",background:"url("+t.themeUrl+"/styles/i/grid.png) repeat 0 0",cursor:"pointer",display:"none"}).children().css("background","url("+t.themeUrl+"/styles/i/h-grid.png) repeat-y 50% 0").end(),r=e('<button type="button">Fermer la grille</button>').appendTo("body").css({position:"fixed",top:"0",right:"0",zIndex:"9999",padding:"10px",color:"#fff",background:"#494949",display:"none"}),r.add(n).click(function(e){e.stopImmediatePropagation(),u()})}function s(){n.add(n.children()).css({width:e("body").outerWidth(),height:e("body").outerHeight()})}function o(){n||i(),s(),n.add(r).fadeIn(150)}function u(){!n||n.add(r).fadeOut(150)}var n,r;e.lesintegristes={},t.grid=e.lesintegristes.toggleGrid=function(){jQuery("body > .grid").is(":visible")?u():o()}}()}(jQuery,LESINTEGRISTES);